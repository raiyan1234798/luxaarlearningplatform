(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},29966,e=>{"use strict";var t=e.i(18050),a=e.i(71645);e.i(51718);var r=e.i(18357),o=e.i(67426);e.i(36180);var i=e.i(98925),l=e.i(18566),s=e.i(5766);let u=(0,a.createContext)({user:null,profile:null,loading:!0,signInWithGoogle:async()=>{},signOut:async()=>{}});e.s(["AuthProvider",0,({children:e})=>{let[n,d]=(0,a.useState)(null),[c,h]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),p=(0,l.useRouter)();(0,a.useEffect)(()=>{if("127.0.0.1"===window.location.hostname){let e=window.location.href.replace("127.0.0.1","localhost");window.location.replace(e)}},[]),(0,a.useEffect)(()=>{let e=(0,r.onAuthStateChanged)(o.auth,async e=>{if(d(e),e){let t=(0,i.doc)(o.db,"users",e.uid),a=await (0,i.getDoc)(t);if(a.exists()){let r=a.data();e.email&&["abubackerraiyan@gmail.com","dhl.abu@gmail.com"].includes(e.email)&&("admin"!==r.role||"approved"!==r.status)&&(await (0,i.updateDoc)(t,{role:"admin",status:"approved"}),r.role="admin",r.status="approved",s.default.success("Profile upgraded to Admin")),h(r)}else{let a=e.email&&["abubackerraiyan@gmail.com","dhl.abu@gmail.com"].includes(e.email),r={id:e.uid,email:e.email||"",full_name:e.displayName||"User",avatar_url:e.photoURL||null,role:a?"admin":"student",status:a?"approved":"pending",bio:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{await (0,i.setDoc)(t,r),h(r)}catch(e){console.error("Error creating profile:",e),s.default.error("Failed to create user profile")}}}else h(null);g(!1)});return()=>e()},[]);let f=async()=>{try{let e=new r.GoogleAuthProvider;await (0,r.signInWithPopup)(o.auth,e),s.default.success("Signed in successfully!"),p.push("/dashboard")}catch(e){if(console.error("Error signing in with Google",e),"auth/popup-blocked"===e.code)return void s.default.error("Popup blocked! Please allow popups for this site.");if("auth/cancelled-popup-request"===e.code)return;if("auth/unauthorized-domain"===e.code||e.message&&e.message.includes("domain is not authorized")){s.default.error("Domain unauthorized! Redirecting to localhost..."),window.location.href=window.location.href.replace("127.0.0.1","localhost");return}s.default.error(e.message||"Failed to sign in")}},w=async()=>{try{await (0,r.signOut)(o.auth),s.default.success("Signed out"),p.push("/login")}catch(e){console.error("Error signing out",e),s.default.error("Failed to sign out")}};return(0,t.jsx)(u.Provider,{value:{user:n,profile:c,loading:m,signInWithGoogle:f,signOut:w},children:!m&&e})},"useAuth",0,()=>(0,a.useContext)(u)])},15290,e=>{"use strict";var t=e.i(18050),a=e.i(71645);let r=(0,a.createContext)({theme:"dark",toggleTheme:()=>{}});function o({children:e}){let[o,i]=(0,a.useState)("dark"),[l,s]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=localStorage.getItem("luxaar-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",a=e??t;i(a),document.documentElement.classList.toggle("dark","dark"===a),s(!0)},[]),l)?(0,t.jsx)(r.Provider,{value:{theme:o,toggleTheme:()=>{let e="dark"===o?"light":"dark";i(e),localStorage.setItem("luxaar-theme",e),document.documentElement.classList.toggle("dark","dark"===e)}},children:e}):(0,t.jsx)("div",{style:{visibility:"hidden"},children:e})}function i(){return(0,a.useContext)(r)}e.s(["ThemeProvider",()=>o,"useTheme",()=>i])}]);