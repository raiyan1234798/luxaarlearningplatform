(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64659,55900,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>s],64659);let l=(0,t.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>l],55900)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},14978,e=>{"use strict";var t=e.i(18050),s=e.i(71645),l=e.i(46932),i=e.i(18566),r=e.i(5766),a=e.i(11795),n=e.i(7233),o=e.i(75254);let d=(0,o.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var c=e.i(64659),u=e.i(55900);let p=(0,o.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),h=(0,o.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),x=(0,o.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),m=(0,o.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var y=e.i(78583);let v=(0,o.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var g=e.i(22016);function f(e){return{title:"",description:"",video_url:"",video_type:"google_drive",notes:"",resources:[],duration_seconds:"",order_index:e}}function j(e){return{title:"",description:"",order_index:e,lessons:[f(0)]}}function b({mode:e,userId:o,initialCourse:b}){let C=(0,i.useRouter)(),k=(0,a.createClient)(),[_,S]=(0,s.useState)(!1),[N,z]=(0,s.useState)(b?.title??""),[w,M]=(0,s.useState)(b?.description??""),[T,D]=(0,s.useState)(b?.thumbnail_url??""),[B,R]=(0,s.useState)(b?.instructor_name??""),[U,H]=(0,s.useState)(b?.tags?.join(", ")??""),[L,P]=(0,s.useState)(b?.difficulty??"beginner"),[I,A]=(0,s.useState)(b?.is_published??!1),[F,V]=(0,s.useState)(b?.is_featured??!1),[W,q]=(0,s.useState)(b?.modules&&b.modules.length>0?b.modules.sort((e,t)=>e.order_index-t.order_index).map(e=>({id:e.id,title:e.title,description:e.description??"",order_index:e.order_index,lessons:e.lessons.sort((e,t)=>e.order_index-t.order_index).map(e=>({id:e.id,title:e.title,description:e.description??"",video_url:e.video_url,video_type:e.video_type,notes:e.notes??"",resources:e.resources??[],duration_seconds:e.duration_seconds?.toString()??"",order_index:e.order_index}))})):[j(0)]),[$,G]=(0,s.useState)(new Set([0])),[O,E]=(0,s.useState)(new Set(["0-0"]));function J(e,t,s){q(l=>{let i=[...l];return i[e]={...i[e],[t]:s},i})}function K(e,t,s,l){q(i=>{let r=[...i],a={...r[e]},n=[...a.lessons];return n[t]={...n[t],[s]:l},a.lessons=n,r[e]=a,r})}function Y(e,t,s,l,i){let r=[...W[e].lessons[t].resources];r[s]={...r[s],[l]:i},K(e,t,"resources",r)}async function Q(){if(!N.trim())return void r.default.error("Course title is required");S(!0);let t=U.split(",").map(e=>e.trim()).filter(Boolean),s=b?.id;if("create"===e){let{data:e,error:l}=await k.from("courses").insert({title:N,description:w,thumbnail_url:T||null,instructor_name:B,tags:t,difficulty:L,is_published:I,is_featured:F,created_by:o}).select().single();if(l){r.default.error("Failed to create course: "+l.message),S(!1);return}s=e.id}else{let{error:e}=await k.from("courses").update({title:N,description:w,thumbnail_url:T||null,instructor_name:B,tags:t,difficulty:L,is_published:I,is_featured:F}).eq("id",s);if(e){r.default.error("Failed to update course"),S(!1);return}}for(let[e,t]of W.entries()){let l=t.id;if(l)await k.from("modules").update({title:t.title,description:t.description||null,order_index:e}).eq("id",l);else{let{data:i}=await k.from("modules").insert({course_id:s,title:t.title,description:t.description||null,order_index:e}).select().single();l=i?.id}if(l)for(let[e,i]of t.lessons.entries()){let t={module_id:l,course_id:s,title:i.title,description:i.description||null,video_url:i.video_url,video_type:i.video_type,notes:i.notes||null,resources:i.resources,duration_seconds:i.duration_seconds?parseInt(i.duration_seconds):null,order_index:e};i.id?await k.from("lessons").update(t).eq("id",i.id):await k.from("lessons").insert(t)}}r.default.success("create"===e?"Course created!":"Course updated!"),C.push(`/dashboard/courses/${s}`),S(!1)}return(0,t.jsxs)("div",{style:{maxWidth:900},children:[(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginBottom:28},children:[(0,t.jsx)(g.default,{href:"/dashboard/admin/courses",style:{textDecoration:"none"},children:(0,t.jsxs)("button",{className:"btn-secondary",style:{fontSize:13,marginBottom:16},children:[(0,t.jsx)(h,{size:14}),"Back to Courses"]})}),(0,t.jsx)("h1",{style:{fontFamily:"Poppins, sans-serif",fontSize:"clamp(1.5rem, 3vw, 2rem)",fontWeight:700,color:"var(--text-primary)",letterSpacing:"-0.02em"},children:"create"===e?"Create New Course":"Edit Course"})]}),(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"24px",marginBottom:20},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)",marginBottom:18},children:"Course Information"}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("label",{className:"label",children:"Course Title *"}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"e.g. Complete Web Development Bootcamp",value:N,onChange:e=>z(e.target.value)})]}),(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("label",{className:"label",children:"Description"}),(0,t.jsx)("textarea",{className:"input",placeholder:"Describe what students will learn...",value:w,onChange:e=>M(e.target.value),style:{minHeight:90}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Instructor Name"}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"John Doe",value:B,onChange:e=>R(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Difficulty"}),(0,t.jsxs)("select",{className:"input",value:L,onChange:e=>P(e.target.value),children:[(0,t.jsx)("option",{value:"beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("label",{className:"label",children:"Tags (comma-separated)"}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"React, JavaScript, Web Development",value:U,onChange:e=>H(e.target.value)})]}),(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("label",{className:"label",children:"Thumbnail URL (optional)"}),(0,t.jsx)("input",{className:"input",type:"url",placeholder:"https://...",value:T,onChange:e=>D(e.target.value)})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:20,gridColumn:"1 / -1"},children:[(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:14,color:"var(--text-secondary)"},children:[(0,t.jsx)("input",{type:"checkbox",checked:I,onChange:e=>A(e.target.checked)}),"Publish course (visible to students)"]}),(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:14,color:"var(--text-secondary)"},children:[(0,t.jsx)("input",{type:"checkbox",checked:F,onChange:e=>V(e.target.checked)}),"Featured course"]})]})]})]}),(0,t.jsxs)("div",{style:{marginBottom:20},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)",marginBottom:14},children:"Course Content"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:W.map((e,s)=>(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"card",style:{overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:$.has(s)?"1px solid var(--border)":"none"},onClick:()=>{G(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},children:[(0,t.jsx)(x,{size:16,color:"var(--text-muted)"}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsxs)("div",{style:{fontSize:12,color:"var(--text-muted)",marginBottom:2},children:["Module ",s+1]}),(0,t.jsx)("div",{style:{fontSize:14,fontWeight:600,color:"var(--text-primary)"},children:e.title||"Untitled Module"})]}),(0,t.jsxs)("span",{style:{fontSize:12,color:"var(--text-muted)"},children:[e.lessons.length," lesson",1!==e.lessons.length?"s":""]}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),q(e=>e.filter((e,t)=>t!==s))},style:{background:"none",border:"none",cursor:"pointer",color:"#f87171",padding:4},children:(0,t.jsx)(d,{size:14})}),$.has(s)?(0,t.jsx)(u.ChevronUp,{size:16,color:"var(--text-muted)"}):(0,t.jsx)(c.ChevronDown,{size:16,color:"var(--text-muted)"})]}),$.has(s)&&(0,t.jsxs)("div",{style:{padding:"20px"},children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:14,marginBottom:20},children:[(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("label",{className:"label",children:"Module Title *"}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Module title",value:e.title,onChange:e=>J(s,"title",e.target.value),onClick:e=>e.stopPropagation()})]}),(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("label",{className:"label",children:"Module Description"}),(0,t.jsx)("textarea",{className:"input",placeholder:"Optional description",value:e.description,onChange:e=>J(s,"description",e.target.value),style:{minHeight:60}})]})]}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:e.lessons.map((e,l)=>{let i=`${s}-${l}`,r=O.has(i);return(0,t.jsxs)("div",{style:{border:"1px solid var(--border)",borderRadius:10,overflow:"hidden",background:"var(--bg-secondary)"},children:[(0,t.jsxs)("div",{style:{padding:"12px 14px",display:"flex",alignItems:"center",gap:10,cursor:"pointer"},onClick:()=>{E(e=>{let t=new Set(e);return t.has(i)?t.delete(i):t.add(i),t})},children:[(0,t.jsx)(m,{size:14,color:"#c9a84c"}),(0,t.jsx)("span",{style:{flex:1,fontSize:13,fontWeight:500,color:"var(--text-primary)"},children:e.title||`Lesson ${l+1}`}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),q(e=>{let t=[...e],i={...t[s]};return i.lessons=i.lessons.filter((e,t)=>t!==l),t[s]=i,t})},style:{background:"none",border:"none",cursor:"pointer",color:"#f87171",padding:4},children:(0,t.jsx)(d,{size:13})}),r?(0,t.jsx)(u.ChevronUp,{size:14,color:"var(--text-muted)"}):(0,t.jsx)(c.ChevronDown,{size:14,color:"var(--text-muted)"})]}),r&&(0,t.jsxs)("div",{style:{padding:"14px",borderTop:"1px solid var(--border)"},children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsx)("label",{className:"label",children:"Lesson Title *"}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Lesson title",value:e.title,onChange:e=>K(s,l,"title",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Video Type"}),(0,t.jsxs)("select",{className:"input",value:e.video_type,onChange:e=>K(s,l,"video_type",e.target.value),children:[(0,t.jsx)("option",{value:"google_drive",children:"Google Drive"}),(0,t.jsx)("option",{value:"github",children:"GitHub"}),(0,t.jsx)("option",{value:"youtube",children:"YouTube"}),(0,t.jsx)("option",{value:"direct",children:"Direct URL"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Duration (seconds)"}),(0,t.jsx)("input",{className:"input",type:"number",placeholder:"e.g. 600",value:e.duration_seconds,onChange:e=>K(s,l,"duration_seconds",e.target.value)})]}),(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsxs)("label",{className:"label",children:[(0,t.jsx)(v,{size:12,style:{display:"inline",marginRight:4}}),"Video URL *"]}),(0,t.jsx)("input",{className:"input",type:"url",placeholder:"https://drive.google.com/file/d/... or raw GitHub URL",value:e.video_url,onChange:e=>K(s,l,"video_url",e.target.value)}),(0,t.jsxs)("p",{style:{fontSize:11,color:"var(--text-muted)",marginTop:4},children:["google_drive"===e.video_type&&"Share â†’ Copy link from Google Drive","github"===e.video_type&&"Use raw GitHub content URL ending in .mp4","youtube"===e.video_type&&"Standard YouTube watch URL"]})]}),(0,t.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,t.jsxs)("label",{className:"label",children:[(0,t.jsx)(y.FileText,{size:12,style:{display:"inline",marginRight:4}}),"Notes (Markdown supported)"]}),(0,t.jsx)("textarea",{className:"input",placeholder:"# Lesson Notes  Add markdown notes here...",value:e.notes,onChange:e=>K(s,l,"notes",e.target.value),style:{minHeight:120,fontFamily:"monospace",fontSize:13}})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Resources"}),e.resources.map((e,i)=>(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr 80px auto",gap:8,marginBottom:8},children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Name",value:e.name,onChange:e=>Y(s,l,i,"name",e.target.value),style:{fontSize:12}}),(0,t.jsx)("input",{className:"input",type:"url",placeholder:"URL",value:e.url,onChange:e=>Y(s,l,i,"url",e.target.value),style:{fontSize:12}}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Type",value:e.type,onChange:e=>Y(s,l,i,"type",e.target.value),style:{fontSize:12}}),(0,t.jsx)("button",{onClick:()=>{K(s,l,"resources",W[s].lessons[l].resources.filter((e,t)=>t!==i))},style:{background:"none",border:"none",cursor:"pointer",color:"#f87171",display:"flex",alignItems:"center"},children:(0,t.jsx)(d,{size:13})})]},i)),(0,t.jsxs)("button",{className:"btn-secondary",onClick:()=>{K(s,l,"resources",[...W[s].lessons[l].resources,{name:"",url:"",type:"PDF"}])},style:{fontSize:12,marginTop:4},children:[(0,t.jsx)(n.Plus,{size:13}),"Add Resource"]})]})]})]},l)})}),(0,t.jsxs)("button",{className:"btn-secondary",onClick:e=>{e.stopPropagation(),q(e=>{let t=[...e],l={...t[s]},i=l.lessons.length;return l.lessons=[...l.lessons,f(i)],t[s]=l,t}),E(e=>new Set([...e,`${s}-${W[s].lessons.length}`]))},style:{fontSize:13,marginTop:12},children:[(0,t.jsx)(n.Plus,{size:14}),"Add Lesson"]})]})]},s))}),(0,t.jsxs)("button",{className:"btn-secondary",onClick:function(){q([...W,j(W.length)]),G(e=>new Set([...e,W.length]))},style:{marginTop:12,fontSize:14},children:[(0,t.jsx)(n.Plus,{size:15}),"Add Module"]})]}),(0,t.jsxs)("div",{style:{position:"sticky",bottom:0,background:"var(--bg-primary)",padding:"16px 0",borderTop:"1px solid var(--border)",display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,t.jsx)(g.default,{href:"/dashboard/admin/courses",children:(0,t.jsx)("button",{className:"btn-secondary",children:"Cancel"})}),(0,t.jsxs)("button",{className:"btn-primary",onClick:Q,disabled:_,children:[(0,t.jsx)(p,{size:16}),_?"Saving...":"create"===e?"Create Course":"Save Changes"]})]})]})}e.s(["default",()=>b],14978)},11212,e=>{"use strict";var t=e.i(18050),s=e.i(29966),l=e.i(14978),i=e.i(18566),r=e.i(71645);function a(){let{user:e,profile:a,loading:n}=(0,s.useAuth)(),o=(0,i.useRouter)();return((0,r.useEffect)(()=>{!n&&a&&"admin"!==a.role&&o.push("/dashboard")},[n,a,o]),e&&a&&"admin"===a.role)?(0,t.jsx)(l.default,{mode:"create",userId:e.uid}):null}e.s(["default",()=>a])}]);