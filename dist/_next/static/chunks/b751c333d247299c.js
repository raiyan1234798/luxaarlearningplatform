(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},29966,e=>{"use strict";var t=e.i(18050),r=e.i(71645);e.i(51718);var o=e.i(18357),a=e.i(67426);e.i(36180);var i=e.i(98925),l=e.i(18566),s=e.i(5766);let n=(0,r.createContext)({user:null,profile:null,loading:!0,signInWithGoogle:async()=>{},signOut:async()=>{}});e.s(["AuthProvider",0,({children:e})=>{let[u,d]=(0,r.useState)(null),[c,h]=(0,r.useState)(null),[g,m]=(0,r.useState)(!0),p=(0,l.useRouter)();(0,r.useEffect)(()=>{if("127.0.0.1"===window.location.hostname){let e=window.location.href.replace("127.0.0.1","localhost");window.location.replace(e)}},[]),(0,r.useEffect)(()=>{let e=(0,o.onAuthStateChanged)(a.auth,async e=>{if(d(e),m(!0),e)try{let t,r=(0,i.doc)(a.db,"users",e.uid);try{t=await (0,i.getDoc)(r)}catch(e){console.error("Error fetching user profile:",e),t={exists:()=>!1,data:()=>void 0}}let o=e.email&&["abubackerraiyan@gmail.com","dhl.abu@gmail.com","abubackerraaiyan@gmail.com"].some(t=>t.toLowerCase()===e.email?.toLowerCase());if(t.exists()){let e=t.data();if(o&&("admin"!==e.role||"approved"!==e.status)){try{await (0,i.updateDoc)(r,{role:"admin",status:"approved"}),s.default.success("Profile upgraded to Admin")}catch(e){console.error("Error upgrading admin profile:",e)}e.role="admin",e.status="approved"}h(e)}else{let t={id:e.uid,email:e.email||"",full_name:e.displayName||"User",avatar_url:e.photoURL||null,role:o?"admin":"student",status:o?"approved":"pending",bio:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{await (0,i.setDoc)(r,t)}catch(e){console.error("Error creating profile:",e),s.default.error("Failed to save user profile")}h(t)}}catch(e){console.error("Unexpected auth error:",e),h(null)}else h(null);m(!1)});return()=>e()},[]);let f=async()=>{try{let e=new o.GoogleAuthProvider;await (0,o.signInWithPopup)(a.auth,e),s.default.success("Signed in successfully!"),p.push("/dashboard")}catch(e){if(console.error("Error signing in with Google",e),"auth/popup-blocked"===e.code)return void s.default.error("Popup blocked! Please allow popups for this site.");if("auth/cancelled-popup-request"===e.code)return;if("auth/unauthorized-domain"===e.code||e.message&&e.message.includes("domain is not authorized")){s.default.error("Domain unauthorized! Redirecting to localhost..."),window.location.href=window.location.href.replace("127.0.0.1","localhost");return}s.default.error(e.message||"Failed to sign in")}},w=async()=>{try{await (0,o.signOut)(a.auth),s.default.success("Signed out"),p.push("/login")}catch(e){console.error("Error signing out",e),s.default.error("Failed to sign out")}};return(0,t.jsx)(n.Provider,{value:{user:u,profile:c,loading:g,signInWithGoogle:f,signOut:w},children:!g&&e})},"useAuth",0,()=>(0,r.useContext)(n)])},15290,e=>{"use strict";var t=e.i(18050),r=e.i(71645);let o=(0,r.createContext)({theme:"dark",toggleTheme:()=>{}});function a({children:e}){let[a,i]=(0,r.useState)("dark"),[l,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=localStorage.getItem("luxaar-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",r=e??t;i(r),document.documentElement.classList.toggle("dark","dark"===r),s(!0)},[]),l)?(0,t.jsx)(o.Provider,{value:{theme:a,toggleTheme:()=>{let e="dark"===a?"light":"dark";i(e),localStorage.setItem("luxaar-theme",e),document.documentElement.classList.toggle("dark","dark"===e)}},children:e}):(0,t.jsx)("div",{style:{visibility:"hidden"},children:e})}function i(){return(0,r.useContext)(o)}e.s(["ThemeProvider",()=>a,"useTheme",()=>i])}]);