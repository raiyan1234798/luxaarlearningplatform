(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);e.s(["Clock",()=>t],3116)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},64659,55900,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>i],64659);let s=(0,t.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>s],55900)},41255,e=>{"use strict";let t=[{id:"course-1",title:"Complete Web Development Bootcamp",description:"Learn web development from scratch with this comprehensive course covering HTML, CSS, JavaScript, React, and more.",thumbnail_url:"https://images.unsplash.com/photo-1593720213428-28a5b9e94613?q=80&w=2070&auto=format&fit=crop",instructor_name:"John Doe",instructor_avatar:null,tags:["Web Dev","React","JavaScript"],difficulty:"beginner",is_published:!0,is_featured:!0,created_by:"admin",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:120,modules:10,lessons:45}},{id:"course-2",title:"Advanced React Patterns",description:"Master advanced React patterns and best practices for building scalable applications.",thumbnail_url:"https://images.unsplash.com/photo-1633356122544-f134324a6cee?q=80&w=2070&auto=format&fit=crop",instructor_name:"Jane Smith",instructor_avatar:null,tags:["React","Advanced"],difficulty:"advanced",is_published:!0,is_featured:!1,created_by:"admin",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:85,modules:8,lessons:32}},{id:"course-3",title:"UI/UX Design Fundamentals",description:"Learn the principles of beautiful and functional user interface design.",thumbnail_url:"https://images.unsplash.com/photo-1586717791821-3f44a5638d48?q=80&w=2070&auto=format&fit=crop",instructor_name:"Sarah Lee",instructor_avatar:null,tags:["Design","Figma","UI/UX"],difficulty:"beginner",is_published:!0,is_featured:!0,created_by:"admin",created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:200,modules:12,lessons:50}},{id:"course-4",title:"Python for Data Science & Machine Learning",description:"Master Python programming for data analysis, visualization, and machine learning with hands-on projects using Pandas, NumPy, and Scikit-Learn.",thumbnail_url:"https://images.unsplash.com/photo-1526379095098-d400fd0bf935?q=80&w=2070&auto=format&fit=crop",instructor_name:"Dr. Alex Rivera",instructor_avatar:null,tags:["Python","Data Science","ML"],difficulty:"intermediate",is_published:!0,is_featured:!0,created_by:"admin",created_at:new Date(Date.now()-2592e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:340,modules:14,lessons:68}},{id:"course-5",title:"Cloud Architecture with AWS",description:"Design and deploy scalable cloud solutions using Amazon Web Services. Covers EC2, S3, Lambda, DynamoDB, and more.",thumbnail_url:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2070&auto=format&fit=crop",instructor_name:"Michael Chen",instructor_avatar:null,tags:["AWS","Cloud","DevOps"],difficulty:"intermediate",is_published:!0,is_featured:!1,created_by:"admin",created_at:new Date(Date.now()-3456e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:156,modules:9,lessons:38}},{id:"course-6",title:"Mobile App Development with Flutter",description:"Build stunning cross-platform mobile apps with Flutter and Dart. Create beautiful, natively compiled applications for iOS and Android.",thumbnail_url:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?q=80&w=2070&auto=format&fit=crop",instructor_name:"Priya Sharma",instructor_avatar:null,tags:["Flutter","Dart","Mobile"],difficulty:"beginner",is_published:!0,is_featured:!0,created_by:"admin",created_at:new Date(Date.now()-432e6).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:278,modules:11,lessons:52}},{id:"course-7",title:"Cybersecurity Essentials",description:"Learn the fundamentals of cybersecurity including threat analysis, ethical hacking, network security, and incident response.",thumbnail_url:"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2070&auto=format&fit=crop",instructor_name:"James Wilson",instructor_avatar:null,tags:["Security","Hacking","Networks"],difficulty:"intermediate",is_published:!0,is_featured:!1,created_by:"admin",created_at:new Date(Date.now()-5184e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:192,modules:10,lessons:42}},{id:"course-8",title:"Modern JavaScript: ES6 to ESNext",description:"Deep dive into modern JavaScript features — from ES6 arrow functions to optional chaining, async generators, and beyond.",thumbnail_url:"https://images.unsplash.com/photo-1627398242454-45a1465c2479?q=80&w=2070&auto=format&fit=crop",instructor_name:"Emily Carter",instructor_avatar:null,tags:["JavaScript","ES6","Frontend"],difficulty:"beginner",is_published:!0,is_featured:!0,created_by:"admin",created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:412,modules:7,lessons:35}},{id:"course-9",title:"Blockchain & Web3 Development",description:"Build decentralized applications with Solidity, Ethereum, and Web3.js. Understand smart contracts, DeFi, and NFT development.",thumbnail_url:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?q=80&w=2070&auto=format&fit=crop",instructor_name:"David Kim",instructor_avatar:null,tags:["Blockchain","Web3","Solidity"],difficulty:"advanced",is_published:!0,is_featured:!1,created_by:"admin",created_at:new Date(Date.now()-6912e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:98,modules:8,lessons:30}},{id:"course-10",title:"Next.js Full-Stack Masterclass",description:"Build production-ready full-stack applications with Next.js 14, Server Actions, App Router, and modern deployment strategies.",thumbnail_url:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=2070&auto=format&fit=crop",instructor_name:"Rachel Green",instructor_avatar:null,tags:["Next.js","Full-Stack","React"],difficulty:"intermediate",is_published:!0,is_featured:!0,created_by:"admin",created_at:new Date(Date.now()-7776e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:265,modules:13,lessons:55}},{id:"course-11",title:"Docker & Kubernetes for Developers",description:"Master containerization with Docker and orchestrate microservices with Kubernetes. Deploy, scale, and manage applications like a pro.",thumbnail_url:"https://images.unsplash.com/photo-1667372393119-3d4c48d07fc9?q=80&w=2070&auto=format&fit=crop",instructor_name:"Omar Hassan",instructor_avatar:null,tags:["Docker","Kubernetes","DevOps"],difficulty:"advanced",is_published:!0,is_featured:!1,created_by:"admin",created_at:new Date(Date.now()-864e6).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:134,modules:9,lessons:40}},{id:"course-12",title:"Graphic Design with Adobe Creative Suite",description:"Create stunning visual designs using Photoshop, Illustrator, and InDesign. From branding to social media — become a design pro.",thumbnail_url:"https://images.unsplash.com/photo-1626785774573-4b799315345d?q=80&w=2070&auto=format&fit=crop",instructor_name:"Lisa Park",instructor_avatar:null,tags:["Photoshop","Illustrator","Design"],difficulty:"beginner",is_published:!0,is_featured:!0,created_by:"admin",created_at:new Date(Date.now()-9504e5).toISOString(),updated_at:new Date().toISOString(),_count:{enrollments:310,modules:15,lessons:60}}],i=[{id:"mod-1",course_id:"course-1",title:"Introduction",description:"Getting started with the course",order_index:0,created_at:new Date().toISOString(),lessons:[{id:"les-1",module_id:"mod-1",course_id:"course-1",title:"Welcome to the Course",description:"Overview of what we will learn",video_url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",video_type:"youtube",duration_seconds:120,order_index:0,created_at:new Date().toISOString(),notes:"Welcome!",resources:[],completed:!1}]}];e.s(["MOCK_COURSES",0,t,"MOCK_MODULES",0,i])},31343,e=>{"use strict";let t=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],31343)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},87768,e=>{"use strict";var t=e.i(18050),i=e.i(29966),s=e.i(71645),a=e.i(46932),r=e.i(18566),n=e.i(5766);e.i(36180);var o=e.i(98925),l=e.i(67426),d=e.i(75157),c=e.i(10980),u=e.i(31343),m=e.i(3116),p=e.i(61911),h=e.i(69638),g=e.i(64659),f=e.i(55900),y=e.i(70756),x=e.i(88511),_=e.i(14764);let b=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var v=e.i(22016);function S({course:e,enrollment:S,userId:w,isAdmin:j}){(0,r.useRouter)();let{profile:D}=(0,i.useAuth)(),[z,k]=(0,s.useState)(!1),[C,I]=(0,s.useState)(""),[O,B]=(0,s.useState)(null),[A,q]=(0,s.useState)(!0),[R,W]=(0,s.useState)(new Set([e.modules?.[0]?.id])),M=e.modules?.reduce((e,t)=>e+(t.lessons?.length??0),0)??0,E=(0,d.getDifficultyColor)(e.difficulty);async function N(){k(!0);try{await (0,o.addDoc)((0,o.collection)(l.db,"course_access_requests"),{user_id:w,user_name:D?.full_name||"Unknown",user_email:D?.email||"",course_id:e.id,course_title:e.title,status:"pending",message:C.trim()||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),n.default.success("Access request submitted! The admin will review it."),B("pending")}catch(e){console.error("Error submitting request:",e),n.default.error("Failed to submit request")}k(!1)}return(0,s.useEffect)(()=>{!async function(){if(j||S)return q(!1);try{let t=(0,o.query)((0,o.collection)(l.db,"course_access_requests"),(0,o.where)("user_id","==",w),(0,o.where)("course_id","==",e.id)),i=await (0,o.getDocs)(t);if(!i.empty){let e=i.docs[0].data();B(e.status)}}catch(e){}finally{q(!1)}}()},[w,e.id,j,S]),(0,t.jsxs)("div",{style:{maxWidth:1100},children:[(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginBottom:32},children:[(0,t.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center",marginBottom:12,flexWrap:"wrap"},children:[(0,t.jsx)("span",{className:`badge ${E}`,style:{fontSize:12},children:e.difficulty}),e.tags?.map(e=>(0,t.jsx)("span",{style:{fontSize:12,padding:"3px 10px",borderRadius:999,background:"var(--bg-secondary)",color:"var(--text-muted)"},children:e},e)),!e.is_published&&(0,t.jsx)("span",{style:{fontSize:12,padding:"3px 10px",borderRadius:999,background:"rgba(248,113,113,0.1)",color:"#f87171"},children:"Draft"})]}),(0,t.jsx)("h1",{style:{fontFamily:"Poppins, sans-serif",fontSize:"clamp(1.5rem, 3vw, 2.25rem)",fontWeight:700,color:"var(--text-primary)",letterSpacing:"-0.02em",marginBottom:12,lineHeight:1.2},children:e.title}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:15,lineHeight:1.7,marginBottom:16,maxWidth:700},children:e.description}),(0,t.jsxs)("div",{style:{display:"flex",gap:20,flexWrap:"wrap",alignItems:"center",fontSize:14,color:"var(--text-muted)"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,t.jsx)(p.Users,{size:14,color:"#c9a84c"}),(0,t.jsx)("span",{style:{color:"var(--text-secondary)"},children:e.instructor_name})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,t.jsx)(c.BookOpen,{size:14}),(0,t.jsxs)("span",{children:[M," lessons"]})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,t.jsx)(m.Clock,{size:14}),(0,t.jsxs)("span",{children:["Updated ",(0,d.formatDate)(e.updated_at)]})]})]})]}),(0,t.jsxs)("div",{className:"course-detail-grid",children:[(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:[(0,t.jsx)("h2",{style:{fontSize:17,fontWeight:600,color:"var(--text-primary)",marginBottom:14},children:"Course Content"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.modules?.sort((e,t)=>e.order_index-t.order_index).map((e,i)=>(0,t.jsxs)("div",{className:"card",style:{overflow:"hidden"},children:[(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.id,void W(e=>{let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i})},style:{width:"100%",padding:"16px 18px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:12,textAlign:"left"},children:[(0,t.jsx)("div",{style:{width:30,height:30,borderRadius:8,background:"rgba(201,168,76,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:13,fontWeight:700,color:"#c9a84c"},children:i+1}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("div",{style:{fontWeight:600,fontSize:14,color:"var(--text-primary)"},children:e.title}),(0,t.jsxs)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:[e.lessons?.length??0," lessons"]})]}),R.has(e.id)?(0,t.jsx)(f.ChevronUp,{size:16,color:"var(--text-muted)"}):(0,t.jsx)(g.ChevronDown,{size:16,color:"var(--text-muted)"})]}),R.has(e.id)&&e.lessons&&(0,t.jsx)("div",{style:{borderTop:"1px solid var(--border)",padding:"8px"},children:e.lessons.sort((e,t)=>(e.order_index??0)-(t.order_index??0)).map((e,i)=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"10px 10px",borderRadius:8},children:[S||j?(0,t.jsx)(u.Play,{size:14,color:"#c9a84c"}):(0,t.jsx)(y.Lock,{size:14,color:"var(--text-muted)"}),(0,t.jsxs)("span",{style:{fontSize:13,color:S||j?"var(--text-primary)":"var(--text-muted)",flex:1},children:[i+1,". ",e.title]})]},e.id))})]},e.id)),(!e.modules||0===e.modules.length)&&(0,t.jsxs)("div",{className:"card",style:{padding:32,textAlign:"center"},children:[(0,t.jsx)(c.BookOpen,{size:32,color:"var(--text-muted)",style:{marginBottom:12}}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",fontSize:14},children:"No content added yet."})]})]})]}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"course-detail-sidebar",children:(0,t.jsxs)("div",{className:"card",style:{padding:"24px"},children:[S?(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:"rgba(74,222,128,0.1)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px"},children:(0,t.jsx)(h.CheckCircle,{size:24,color:"#4ade80"})}),(0,t.jsx)("p",{style:{fontSize:14,fontWeight:600,marginBottom:6,color:"var(--text-primary)"},children:"You're enrolled"}),(0,t.jsx)("div",{className:"progress-bar",style:{marginBottom:8},children:(0,t.jsx)("div",{className:"progress-fill",style:{width:`${S.progress_percentage}%`}})}),(0,t.jsxs)("p",{style:{fontSize:12,color:"#c9a84c",marginBottom:16},children:[S.progress_percentage,"% complete"]}),(0,t.jsx)(v.default,{href:`/dashboard/courses/${e.id}/learn`,children:(0,t.jsxs)("button",{className:"btn-primary",style:{width:"100%",justifyContent:"center"},children:[(0,t.jsx)(u.Play,{size:16}),S.progress_percentage>0?"Continue":"Start Learning"]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{marginBottom:16},children:[(0,t.jsx)("p",{style:{fontSize:22,fontWeight:800,color:"var(--text-primary)",marginBottom:4},children:"Free"}),(0,t.jsx)("p",{style:{fontSize:13,color:"var(--text-muted)"},children:"Full course access"})]}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[`${M} lessons`,`${e.modules?.length??0} modules`,"Lifetime access","Completion certificate"].map(e=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)(h.CheckCircle,{size:14,color:"#4ade80"}),(0,t.jsx)("span",{style:{fontSize:13,color:"var(--text-secondary)"},children:e})]},e))}),A?(0,t.jsx)("div",{style:{textAlign:"center",padding:"12px 0"},children:(0,t.jsx)(b,{size:20,color:"#c9a84c",style:{animation:"spin 1s linear infinite"}})}):"pending"===O?(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsxs)("div",{style:{padding:"12px 16px",borderRadius:10,background:"rgba(201,168,76,0.08)",border:"1px solid rgba(201,168,76,0.2)",marginBottom:8},children:[(0,t.jsx)(m.Clock,{size:18,color:"#c9a84c",style:{marginBottom:6}}),(0,t.jsx)("p",{style:{fontSize:13,fontWeight:600,color:"#c9a84c",marginBottom:2},children:"Request Pending"}),(0,t.jsx)("p",{style:{fontSize:11,color:"var(--text-muted)"},children:"Your access request is being reviewed by the admin."})]})}):"approved"===O?(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsxs)("div",{style:{padding:"12px 16px",borderRadius:10,background:"rgba(74,222,128,0.08)",border:"1px solid rgba(74,222,128,0.2)",marginBottom:8},children:[(0,t.jsx)(h.CheckCircle,{size:18,color:"#4ade80",style:{marginBottom:6}}),(0,t.jsx)("p",{style:{fontSize:13,fontWeight:600,color:"#4ade80",marginBottom:2},children:"Access Approved!"}),(0,t.jsx)("p",{style:{fontSize:11,color:"var(--text-muted)"},children:"You now have access to this course."})]}),(0,t.jsx)(v.default,{href:`/dashboard/courses/${e.id}/learn`,children:(0,t.jsxs)("button",{className:"btn-primary",style:{width:"100%",justifyContent:"center",marginTop:8},children:[(0,t.jsx)(u.Play,{size:16}),"Start Learning"]})})]}):"rejected"===O?(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsxs)("div",{style:{padding:"12px 16px",borderRadius:10,background:"rgba(248,113,113,0.08)",border:"1px solid rgba(248,113,113,0.2)"},children:[(0,t.jsx)("p",{style:{fontSize:13,fontWeight:600,color:"#f87171",marginBottom:2},children:"Request Rejected"}),(0,t.jsx)("p",{style:{fontSize:11,color:"var(--text-muted)"},children:"Your access request was not approved. Contact the admin for more details."})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("textarea",{className:"input",placeholder:"Add a message (optional)...",value:C,onChange:e=>I(e.target.value),rows:3,style:{resize:"vertical",marginBottom:10,fontSize:13,minHeight:60}}),(0,t.jsx)("button",{className:"btn-primary",onClick:N,disabled:z,style:{width:"100%",justifyContent:"center"},children:z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{size:16,style:{animation:"spin 1s linear infinite"}}),"Submitting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Send,{size:16}),"Request Access"]})})]})]}),j&&(0,t.jsx)("div",{style:{marginTop:14,paddingTop:14,borderTop:"1px solid var(--border)"},children:(0,t.jsx)(v.default,{href:`/dashboard/admin/courses/${e.id}/edit`,children:(0,t.jsxs)("button",{className:"btn-secondary",style:{width:"100%",justifyContent:"center",fontSize:13},children:[(0,t.jsx)(x.Edit,{size:14}),"Edit Course"]})})})]})})]})]})}var w=e.i(41255),j=e.i(21841);function D({params:e}){let{courseId:a}=(0,s.use)(e),{user:n,profile:d}=(0,i.useAuth)(),[c,u]=(0,s.useState)(null),[m,p]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[f,y]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{async function e(){if(!n)return void p(!1);try{let e=(0,o.collection)(l.db,"enrollments"),t=(0,o.query)(e,(0,o.where)("user_id","==",n.uid),(0,o.where)("course_id","==",a)),i=await (0,o.getDocs)(t);if(!i.empty){let e=i.docs[0].data();u({id:i.docs[0].id,user_id:e.user_id,course_id:e.course_id,enrolled_at:e.enrolled_at,completed_at:e.completed_at,progress_percentage:e.progress_percentage||0,certificate_issued:e.certificate_issued||!1})}}catch(e){console.error("Error checking enrollment:",e)}p(!1)}async function t(){y(!0);try{let e=(0,o.doc)(l.db,"courses",a),t=await (0,o.getDoc)(e);if(t.exists()){let e=t.data(),i=(0,o.query)((0,o.collection)(l.db,"modules"),(0,o.where)("course_id","==",a)),s=(await (0,o.getDocs)(i)).docs.map(e=>({id:e.id,...e.data(),lessons:[]})),r=(0,o.query)((0,o.collection)(l.db,"lessons"),(0,o.where)("course_id","==",a)),n=(await (0,o.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}));s.forEach(e=>{e.lessons=n.filter(t=>t.module_id===e.id).sort((e,t)=>(e.order_index||0)-(t.order_index||0))}),s.sort((e,t)=>(e.order_index||0)-(t.order_index||0)),g({...e,id:t.id,modules:s})}else{let e=w.MOCK_COURSES.find(e=>e.id===a);e&&g({...e,modules:w.MOCK_MODULES.filter(e=>e.course_id===a)})}}catch(e){console.error("Error fetching course:",e)}finally{y(!1)}}n?e():p(!1),t()},[n,a]),d||n)?m||f?(0,t.jsx)(j.default,{text:"Loading course...",size:"sm"}):(h||(0,r.notFound)(),(0,t.jsx)(S,{course:h,enrollment:c,userId:n?n.uid:"",isAdmin:d?.role==="admin"})):(0,t.jsx)(j.default,{text:"Loading...",size:"sm"})}e.s(["default",()=>D],87768)}]);