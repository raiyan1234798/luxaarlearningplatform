(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);e.s(["Clock",()=>t],3116)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},31343,e=>{"use strict";let t=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],31343)},72091,e=>{"use strict";var t=e.i(18050),r=e.i(22016),i=e.i(75157),s=e.i(10980),a=e.i(61911),l=e.i(31343);function n({course:e,progress:n,isEnrolled:o}){let d=(0,i.getDifficultyColor)(e.difficulty);return(0,t.jsxs)(r.default,{href:o?`/dashboard/courses/${e.id}/learn`:`/dashboard/courses/${e.id}`,style:{textDecoration:"none"},children:[(0,t.jsxs)("div",{className:"card",style:{overflow:"hidden",cursor:"pointer",height:"100%",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("div",{style:{height:140,background:"linear-gradient(135deg, rgba(201,168,76,0.15) 0%, rgba(124,58,237,0.1) 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:[e.thumbnail_url?(0,t.jsx)("img",{src:e.thumbnail_url,alt:e.title,className:"course-thumbnail",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,t.jsx)(s.BookOpen,{size:40,color:"rgba(201,168,76,0.5)"}),(0,t.jsx)("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s"},className:"play-overlay",children:(0,t.jsx)("div",{style:{width:44,height:44,borderRadius:"50%",background:"rgba(201,168,76,0.9)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(l.Play,{size:18,color:"#0a0a0a"})})}),e.is_featured&&(0,t.jsx)("div",{style:{position:"absolute",top:10,left:10,padding:"3px 9px",borderRadius:999,background:"rgba(201,168,76,0.9)",fontSize:11,fontWeight:600,color:"#0a0a0a"},children:"Featured"})]}),(0,t.jsxs)("div",{style:{padding:"16px",flex:1,display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,t.jsx)("span",{className:`badge ${d}`,style:{fontSize:11},children:e.difficulty}),e.tags?.slice(0,1).map(e=>(0,t.jsx)("span",{style:{fontSize:11,padding:"2px 8px",borderRadius:999,background:"var(--bg-secondary)",color:"var(--text-muted)"},children:e},e))]}),(0,t.jsx)("h3",{style:{fontSize:15,fontWeight:600,color:"var(--text-primary)",marginBottom:6,lineHeight:1.4},children:(0,i.truncate)(e.title,50)}),(0,t.jsx)("p",{style:{fontSize:13,color:"var(--text-secondary)",lineHeight:1.5,marginBottom:12,flex:1},children:(0,i.truncate)(e.description,80)}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"var(--text-muted)",marginBottom:10*(void 0!==n)},children:[(0,t.jsx)("div",{style:{width:22,height:22,borderRadius:"50%",background:"rgba(201,168,76,0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(a.Users,{size:11,color:"#c9a84c"})}),(0,t.jsx)("span",{children:e.instructor_name})]}),void 0!==n&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"var(--text-muted)",marginBottom:5},children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{style:{color:"#c9a84c",fontWeight:600},children:[n,"%"]})]}),(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:`${n}%`}})})]})]})]}),(0,t.jsx)("style",{children:`
        .card:hover .play-overlay {
          opacity: 1 !important;
        }
        .card:hover .course-thumbnail {
          transform: scale(1.05);
        }
        .course-thumbnail {
          transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .play-overlay > div {
          transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
          transform: scale(0.8);
        }
        .card:hover .play-overlay > div {
          transform: scale(1);
        }
      `})]})}e.s(["CourseCard",()=>n])},32102,e=>{"use strict";let t=(0,e.i(75254).default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);e.s(["Inbox",()=>t],32102)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},42009,e=>{"use strict";let t=(0,e.i(75254).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>t],42009)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},70273,e=>{"use strict";let t=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],70273)},98919,39312,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>r],98919);let i=(0,t.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>i],39312)},30257,e=>{"use strict";var t=e.i(18050),r=e.i(90571),i=e.i(46932),s=e.i(22016),a=e.i(72091),l=e.i(10980),n=e.i(31343),o=e.i(42009),d=e.i(3116),c=e.i(72520),p=e.i(70273),y=e.i(98919),u=e.i(39312),h=e.i(25652);function x({profile:e,enrollments:r,featuredCourses:x}){let g=r.filter(e=>e.completed_at).length,m=r.filter(e=>!e.completed_at&&e.progress_percentage>0).length,f=r.filter(e=>!e.completed_at&&e.progress_percentage>0).sort((e,t)=>new Date(t.enrolled_at).getTime()-new Date(e.enrolled_at).getTime())[0],v=[{id:"first_enrollment",name:"Beginner",description:"Enrolled in your first course",icon:y.Shield,color:"#3b82f6",earned:r.length>0},{id:"active_learner",name:"Active Learner",description:"Started learning a course",icon:u.Zap,color:"#f59e0b",earned:m>0||g>0},{id:"first_completion",name:"Achiever",description:"Completed a course",icon:o.Award,color:"#10b981",earned:g>0},{id:"scholar",name:"Scholar",description:"Completed 3 or more courses",icon:p.Star,color:"#c9a84c",earned:g>=3},{id:"master",name:"Master",description:"Enrolled in 5 or more courses",icon:h.TrendingUp,color:"#8b5cf6",earned:r.length>=5}];return(0,t.jsxs)("div",{style:{maxWidth:1200},children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginBottom:28},children:[(0,t.jsxs)("h1",{style:{fontFamily:"Poppins, sans-serif",fontSize:"clamp(1.5rem, 3vw, 2rem)",fontWeight:700,color:"var(--text-primary)",letterSpacing:"-0.02em"},children:["Welcome back, ",e.full_name?.split(" ")[0]??"Learner"," ðŸ‘‹"]}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:14,marginTop:4},children:"Continue your learning journey."})]}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:14,marginBottom:28},children:[{label:"Enrolled",value:r.length,icon:l.BookOpen,color:"#c9a84c"},{label:"In Progress",value:m,icon:d.Clock,color:"#a78bfa"},{label:"Completed",value:g,icon:o.Award,color:"#34d399"}].map((e,r)=>(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.08*r},className:"card",style:{padding:"18px"},children:[(0,t.jsx)("div",{style:{width:36,height:36,borderRadius:10,background:`${e.color}14`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12},children:(0,t.jsx)(e.icon,{size:17,color:e.color})}),(0,t.jsx)("div",{style:{fontSize:26,fontWeight:800,fontFamily:"Poppins",color:"var(--text-primary)"},children:e.value}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--text-secondary)",marginTop:2},children:e.label})]},e.label))}),(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},style:{marginBottom:32},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:14},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)"},children:"My Badges"}),(0,t.jsxs)("span",{className:"badge",style:{marginLeft:12,padding:"2px 8px",fontSize:11,background:"rgba(201,168,76,0.1)",color:"#c9a84c"},children:[v.filter(e=>e.earned).length," / ",v.length," Earned"]})]}),(0,t.jsx)("div",{style:{display:"flex",gap:16,overflowX:"auto",paddingBottom:8},className:"hide-scroll",children:v.map((e,r)=>(0,t.jsxs)("div",{style:{minWidth:140,padding:"16px 12px",borderRadius:12,background:e.earned?"var(--bg-secondary)":"transparent",border:`1px solid ${e.earned?"var(--border)":"rgba(255,255,255,0.05)"}`,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",opacity:e.earned?1:.4,transition:"all 0.2s"},children:[(0,t.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:e.earned?`${e.color}15`:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10,boxShadow:e.earned?`0 0 16px ${e.color}30`:"none"},children:(0,t.jsx)(e.icon,{size:24,color:e.earned?e.color:"var(--text-muted)"})}),(0,t.jsx)("div",{style:{fontSize:13,fontWeight:600,color:e.earned?"var(--text-primary)":"var(--text-secondary)",marginBottom:4},children:e.name}),(0,t.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)",lineHeight:1.3},children:e.description})]},e.id))})]}),f&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},style:{marginBottom:28},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)",marginBottom:14},children:"Continue Watching"}),(0,t.jsx)(s.default,{href:`/dashboard/courses/${f.course.id}/learn`,style:{textDecoration:"none"},children:(0,t.jsxs)("div",{className:"card",style:{padding:"20px",display:"flex",alignItems:"center",gap:16,background:"linear-gradient(135deg, rgba(201,168,76,0.05) 0%, transparent 100%)",border:"1px solid rgba(201,168,76,0.15)",cursor:"pointer"},children:[(0,t.jsx)("div",{style:{width:56,height:56,borderRadius:14,background:"rgba(201,168,76,0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)(n.Play,{size:24,color:"#c9a84c"})}),(0,t.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,t.jsx)("div",{style:{fontSize:15,fontWeight:600,color:"var(--text-primary)",marginBottom:4},children:f.course.title}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:10},children:f.course.instructor_name}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-muted)",marginBottom:6},children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{style:{color:"#c9a84c",fontWeight:600},children:[f.progress_percentage,"%"]})]}),(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:`${f.progress_percentage}%`}})})]})]}),(0,t.jsx)(c.ArrowRight,{size:18,color:"#c9a84c"})]})})]}),r.length>0&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{marginBottom:36},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)"},children:"My Courses"}),(0,t.jsx)(s.default,{href:"/dashboard/my-courses",style:{textDecoration:"none"},children:(0,t.jsxs)("span",{style:{fontSize:13,color:"#c9a84c",fontWeight:500,display:"flex",alignItems:"center",gap:4},children:["View all ",(0,t.jsx)(c.ArrowRight,{size:13})]})})]}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:r.slice(0,3).map((e,r)=>(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.08*r},children:(0,t.jsx)(a.CourseCard,{course:e.course,progress:e.progress_percentage,isEnrolled:!0})},e.course.id))})]}),x.length>0&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)"},children:0===r.length?"Explore Courses":"Discover More"}),(0,t.jsx)(s.default,{href:"/dashboard/courses",style:{textDecoration:"none"},children:(0,t.jsxs)("span",{style:{fontSize:13,color:"#c9a84c",fontWeight:500,display:"flex",alignItems:"center",gap:4},children:["Browse all ",(0,t.jsx)(c.ArrowRight,{size:13})]})})]}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:x.slice(0,6).map((e,r)=>(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+.06*r},children:(0,t.jsx)(a.CourseCard,{course:e})},e.id))})]}),0===r.length&&0===x.length&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"card",style:{padding:48,textAlign:"center"},children:[(0,t.jsx)(l.BookOpen,{size:48,color:"var(--text-muted)",style:{marginBottom:16}}),(0,t.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8,color:"var(--text-primary)"},children:"No courses available yet"}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",fontSize:14},children:"Check back soon â€” new content is being added regularly."})]})]})}var g=e.i(71645),m=e.i(5766);e.i(36180);var f=e.i(98925),v=e.i(67426),j=e.i(75157),b=e.i(61911),S=e.i(69638),z=e.i(74323),_=e.i(17923),w=e.i(91741),k=e.i(73884),C=e.i(32102),B=e.i(40160);function I({stats:e,recentUsers:r,recentCourses:a,accessRequests:n,profile:o}){let[c,p]=(0,g.useState)(n),[y,u]=(0,g.useState)(null),x=c.filter(e=>"pending"===e.status);async function I(e){u(e.id);try{let t=(0,f.doc)(v.db,"course_access_requests",e.id);await (0,f.updateDoc)(t,{status:"approved",updated_at:new Date().toISOString()}),await (0,f.addDoc)((0,f.collection)(v.db,"enrollments"),{user_id:e.user_id,user_email:e.user_email,user_name:e.user_name,course_id:e.course_id,course_title:e.course_title,enrolled_at:new Date().toISOString(),completed_at:null,progress_percentage:0,certificate_issued:!1}),m.default.success(`Approved access for ${e.user_name}`),p(t=>t.map(t=>t.id===e.id?{...t,status:"approved"}:t))}catch(e){console.error("Error approving request:",e),m.default.error("Failed to approve request")}u(null)}async function W(e){u(e.id);try{let t=(0,f.doc)(v.db,"course_access_requests",e.id);await (0,f.updateDoc)(t,{status:"rejected",updated_at:new Date().toISOString()}),m.default.success(`Rejected request from ${e.user_name}`),p(t=>t.map(t=>t.id===e.id?{...t,status:"rejected"}:t))}catch(e){console.error("Error rejecting request:",e),m.default.error("Failed to reject request")}u(null)}async function D(){try{let e=(0,f.collection)(v.db,"users"),t=(await (0,f.getDocs)(e)).docs.map(e=>e.data());if(0===t.length)return void(0,m.default)("No users to export",{icon:"â„¹ï¸"});let r=["ID,Full Name,Email,Role,Status,Created At"];for(let e of t){let t=[e.id,`"${e.full_name||""}"`,e.email,e.role,e.status,e.created_at];r.push(t.join(","))}let i=r.join("\n"),s=new Blob([i],{type:"text/csv"}),a=window.URL.createObjectURL(s),l=document.createElement("a");l.setAttribute("hidden",""),l.setAttribute("href",a),l.setAttribute("download",`luxaar_users_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l),m.default.success("Exported users to CSV")}catch(e){console.error("Export error:",e),m.default.error("Failed to export data")}}let R=[{label:"Total Users",value:e.totalUsers,icon:b.Users,sub:`${e.approvedUsers} approved`,color:"#c9a84c"},{label:"Pending Approvals",value:x.length,icon:d.Clock,sub:"Course access requests",color:"#f59e0b"},{label:"Total Courses",value:e.totalCourses,icon:l.BookOpen,sub:`${e.publishedCourses} published`,color:"#a78bfa"},{label:"Total Enrollments",value:e.totalEnrollments,icon:h.TrendingUp,sub:"All time",color:"#34d399"}];return(0,t.jsxs)("div",{style:{maxWidth:1200},children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginBottom:28},children:[(0,t.jsxs)("h1",{style:{fontFamily:"Poppins, sans-serif",fontSize:"clamp(1.5rem, 3vw, 2rem)",fontWeight:700,color:"var(--text-primary)",letterSpacing:"-0.02em"},children:["Good morning, ",o.full_name?.split(" ")[0]??"Admin"," ðŸ‘‹"]}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:14,marginTop:4},children:"Here's what's happening on your platform today."})]}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:28},children:R.map((e,r)=>(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.08*r},className:"card",style:{padding:"20px 20px"},children:[(0,t.jsx)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:12},children:(0,t.jsx)("div",{style:{width:38,height:38,borderRadius:10,background:`${e.color}14`,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(e.icon,{size:18,color:e.color})})}),(0,t.jsx)("div",{style:{fontSize:28,fontWeight:800,fontFamily:"Poppins",color:"var(--text-primary)",lineHeight:1,marginBottom:4},children:e.value}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--text-secondary)",fontWeight:500},children:e.label}),(0,t.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)",marginTop:2},children:e.sub})]},e.label))}),(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{marginBottom:28},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)",marginBottom:14},children:"Quick Actions"}),(0,t.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[(0,t.jsx)(s.default,{href:"/dashboard/admin/users",children:(0,t.jsxs)("button",{className:"btn-secondary",style:{fontSize:13},children:[(0,t.jsx)(b.Users,{size:15}),"Manage Users"]})}),(0,t.jsx)(s.default,{href:"/dashboard/admin/courses/new",children:(0,t.jsxs)("button",{className:"btn-primary",style:{fontSize:13},children:[(0,t.jsx)(z.PlusCircle,{size:15}),"New Course"]})}),(0,t.jsx)(s.default,{href:"/dashboard/admin/enrollments",children:(0,t.jsxs)("button",{className:"btn-secondary",style:{fontSize:13},children:[(0,t.jsx)(w.ClipboardList,{size:15}),"Access Requests"]})}),(0,t.jsx)(s.default,{href:"/dashboard/admin/analytics",children:(0,t.jsxs)("button",{className:"btn-secondary",style:{fontSize:13},children:[(0,t.jsx)(_.BarChart3,{size:15}),"Analytics"]})}),(0,t.jsxs)("button",{onClick:D,className:"btn-secondary",style:{fontSize:13},children:[(0,t.jsx)(B.Download,{size:15}),"Export Data"]})]})]}),(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},style:{marginBottom:28},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)"},children:"Course Access Requests"}),x.length>0&&(0,t.jsxs)("span",{style:{background:"#f59e0b",color:"#000",borderRadius:999,padding:"2px 8px",fontSize:11,fontWeight:700},children:[x.length," pending"]})]}),(0,t.jsx)(s.default,{href:"/dashboard/admin/enrollments",style:{textDecoration:"none"},children:(0,t.jsx)("span",{style:{fontSize:12,color:"#c9a84c",fontWeight:500},children:"View all"})})]}),(0,t.jsx)("div",{className:"card",style:{overflow:"hidden"},children:0===x.length?(0,t.jsxs)("div",{style:{padding:40,textAlign:"center"},children:[(0,t.jsx)(C.Inbox,{size:36,color:"var(--text-muted)",style:{marginBottom:10,opacity:.3}}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",fontSize:14},children:"No pending access requests"}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",fontSize:12,marginTop:4,opacity:.7},children:"When students request access to your courses, they'll appear here."})]}):(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{style:{borderBottom:"1px solid var(--border)"},children:["Student","Course","Requested","Actions"].map(e=>(0,t.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:12,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:e},e))})}),(0,t.jsx)("tbody",{children:x.slice(0,10).map((e,r)=>(0,t.jsxs)(i.motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.04*r},style:{borderBottom:"1px solid var(--border)",transition:"background 0.15s"},onMouseEnter:e=>e.currentTarget.style.background="var(--bg-secondary)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)("div",{style:{width:36,height:36,borderRadius:"50%",background:"linear-gradient(135deg, #c9a84c, #a07830)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#0a0a0a",flexShrink:0},children:(0,j.getInitials)(e.user_name)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:14,fontWeight:500,color:"var(--text-primary)"},children:e.user_name||"â€”"}),(0,t.jsx)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:e.user_email})]})]})}),(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{width:28,height:28,borderRadius:6,background:"rgba(201,168,76,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)(l.BookOpen,{size:13,color:"#c9a84c"})}),(0,t.jsx)("span",{style:{fontSize:13,fontWeight:500,color:"var(--text-primary)"},children:e.course_title})]})}),(0,t.jsx)("td",{style:{padding:"12px 16px",fontSize:13,color:"var(--text-muted)"},children:(0,j.formatDate)(e.created_at)}),(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,t.jsxs)("button",{onClick:()=>I(e),disabled:y===e.id,style:{display:"flex",alignItems:"center",gap:5,padding:"6px 12px",borderRadius:7,border:"1px solid rgba(74,222,128,0.3)",background:"rgba(74,222,128,0.08)",color:"#4ade80",fontSize:12,fontWeight:500,cursor:"pointer"},children:[(0,t.jsx)(S.CheckCircle,{size:13}),"Approve"]}),(0,t.jsxs)("button",{onClick:()=>W(e),disabled:y===e.id,style:{display:"flex",alignItems:"center",gap:5,padding:"6px 12px",borderRadius:7,border:"1px solid rgba(248,113,113,0.3)",background:"rgba(248,113,113,0.08)",color:"#f87171",fontSize:12,fontWeight:500,cursor:"pointer"},children:[(0,t.jsx)(k.XCircle,{size:13}),"Reject"]})]})})]},e.id))})]})})})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"20px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,t.jsx)("h3",{style:{fontSize:15,fontWeight:600,color:"var(--text-primary)"},children:"Recent Users"}),(0,t.jsx)(s.default,{href:"/dashboard/admin/users",style:{textDecoration:"none"},children:(0,t.jsx)("span",{style:{fontSize:12,color:"#c9a84c",fontWeight:500},children:"View all"})})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[r.map(e=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"10px",borderRadius:10,background:"var(--bg-secondary)"},children:[(0,t.jsx)("div",{style:{width:34,height:34,borderRadius:999,background:"linear-gradient(135deg, #c9a84c, #a07830)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#0a0a0a",flexShrink:0},children:(0,j.getInitials)(e.full_name)}),(0,t.jsxs)("div",{style:{flex:1,overflow:"hidden"},children:[(0,t.jsx)("div",{style:{fontSize:13,fontWeight:500,color:"var(--text-primary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.full_name||"Unknown"}),(0,t.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)"},children:e.email})]}),(0,t.jsx)("span",{className:"badge",style:{fontSize:11,padding:"3px 8px",flexShrink:0,background:"approved"===e.status?"rgba(74,222,128,0.1)":"pending"===e.status?"rgba(201,168,76,0.1)":"rgba(248,113,113,0.1)",color:"approved"===e.status?"#4ade80":"pending"===e.status?"#c9a84c":"#f87171"},children:e.status})]},e.id)),0===r.length&&(0,t.jsx)("p",{style:{fontSize:13,color:"var(--text-muted)",textAlign:"center",padding:"20px 0"},children:"No users yet"})]})]}),(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.45},className:"card",style:{padding:"20px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,t.jsx)("h3",{style:{fontSize:15,fontWeight:600,color:"var(--text-primary)"},children:"Recent Courses"}),(0,t.jsx)(s.default,{href:"/dashboard/courses",style:{textDecoration:"none"},children:(0,t.jsx)("span",{style:{fontSize:12,color:"#c9a84c",fontWeight:500},children:"View all"})})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[a.map(e=>(0,t.jsx)(s.default,{href:`/dashboard/courses/${e.id}`,style:{textDecoration:"none"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:10,borderRadius:10,background:"var(--bg-secondary)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="rgba(201,168,76,0.05)",onMouseLeave:e=>e.currentTarget.style.background="var(--bg-secondary)",children:[(0,t.jsx)("div",{style:{width:38,height:38,borderRadius:8,background:"rgba(201,168,76,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)(l.BookOpen,{size:16,color:"#c9a84c"})}),(0,t.jsxs)("div",{style:{flex:1,overflow:"hidden"},children:[(0,t.jsx)("div",{style:{fontSize:13,fontWeight:500,color:"var(--text-primary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),(0,t.jsxs)("div",{style:{fontSize:11,color:"var(--text-muted)"},children:[e.instructor_name," Â· ",(0,j.formatDate)(e.created_at)]})]}),(0,t.jsx)("span",{style:{fontSize:11,padding:"2px 8px",borderRadius:999,flexShrink:0,background:e.is_published?"rgba(74,222,128,0.1)":"rgba(201,168,76,0.1)",color:e.is_published?"#4ade80":"#c9a84c"},children:e.is_published?"Live":"Draft"})]})},e.id)),0===a.length&&(0,t.jsxs)("div",{style:{textAlign:"center",padding:"24px 0"},children:[(0,t.jsx)("p",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:12},children:"No courses yet"}),(0,t.jsx)(s.default,{href:"/dashboard/admin/courses/new",children:(0,t.jsxs)("button",{className:"btn-primary",style:{fontSize:13},children:[(0,t.jsx)(z.PlusCircle,{size:15}),"Create Course"]})})]})]})]})]})]})}var W=e.i(21841);function D(){let{user:e,profile:i}=(0,r.useAuth)(),[s,a]=(0,g.useState)({totalUsers:0,approvedUsers:0,pendingUsers:0,totalCourses:0,publishedCourses:0,totalEnrollments:0,totalLessons:0}),[l,n]=(0,g.useState)([]),[o,d]=(0,g.useState)([]),[c,p]=(0,g.useState)([]),[y,u]=(0,g.useState)([]),[h,m]=(0,g.useState)(!0);return((0,g.useEffect)(()=>{async function t(){try{let e=(0,f.collection)(v.db,"users"),t=await (0,f.getDocs)((0,f.query)(e,(0,f.orderBy)("created_at","desc"))),r=[];t.forEach(e=>{r.push(e.data())});let i=r.filter(e=>"approved"===e.status).length,s=r.filter(e=>"pending"===e.status).length,l=[];try{let e=(0,f.collection)(v.db,"courses");(await (0,f.getDocs)((0,f.query)(e,(0,f.orderBy)("created_at","desc")))).forEach(e=>{l.push({id:e.id,...e.data()})})}catch(e){}let o=[];try{let e=(0,f.collection)(v.db,"course_access_requests");(await (0,f.getDocs)((0,f.query)(e,(0,f.orderBy)("created_at","desc")))).forEach(e=>{o.push({id:e.id,...e.data()})})}catch(e){}let c=0;try{let e=(0,f.collection)(v.db,"enrollments");c=(await (0,f.getDocs)(e)).size}catch(e){}let y=l.filter(e=>e.is_published).length;a({totalUsers:r.length,approvedUsers:i,pendingUsers:s,totalCourses:l.length,publishedCourses:y,totalEnrollments:c,totalLessons:0}),n(r.slice(0,5)),d(l.slice(0,5)),p(o)}catch(e){console.error("Error fetching admin data:",e)}finally{m(!1)}}async function r(){try{let t=[];try{let e=(0,f.collection)(v.db,"courses");(await (0,f.getDocs)((0,f.query)(e,(0,f.orderBy)("created_at","desc")))).forEach(e=>{t.push({id:e.id,...e.data()})})}catch(e){}if(d(t),e){let r=(0,f.collection)(v.db,"enrollments"),i=(0,f.query)(r,(0,f.where)("user_id","==",e.uid)),s=await (0,f.getDocs)(i),a=[];s.forEach(e=>{a.push({id:e.id,...e.data()})}),a.sort((e,t)=>new Date(t.enrolled_at).getTime()-new Date(e.enrolled_at).getTime());let l=new Map;t.forEach(e=>l.set(e.id,e));let n=a.map(e=>{let t=l.get(e.course_id);return t?{course:t,progress_percentage:e.progress_percentage,enrolled_at:e.enrolled_at,completed_at:e.completed_at}:e.course_title?{course:{id:e.course_id,title:e.course_title,description:"Enrolled course",thumbnail_url:null,instructor_name:"Instructor",instructor_avatar:null,tags:[],difficulty:"beginner",is_published:!0,is_featured:!1,created_by:"",created_at:e.enrolled_at,updated_at:e.enrolled_at},progress_percentage:e.progress_percentage,enrolled_at:e.enrolled_at,completed_at:e.completed_at}:null}).filter(Boolean);u(n)}}catch(e){console.error("Error fetching student data:",e)}finally{m(!1)}}e&&i&&("admin"===i.role?t():r())},[e,i]),e&&i)?h?(0,t.jsx)(W.default,{text:"Loading dashboard..."}):"admin"===i.role?(0,t.jsx)(I,{stats:s,recentUsers:l,recentCourses:o,accessRequests:c,profile:i}):(0,t.jsx)(x,{profile:i,enrollments:y,featuredCourses:o}):null}e.s(["default",()=>D],30257)}]);