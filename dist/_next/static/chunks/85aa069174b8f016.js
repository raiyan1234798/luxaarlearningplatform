(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);e.s(["Clock",()=>t],3116)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},87130,e=>{"use strict";let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],87130)},32102,e=>{"use strict";let t=(0,e.i(75254).default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);e.s(["Inbox",()=>t],32102)},26688,e=>{"use strict";var t=e.i(18050),r=e.i(90571),i=e.i(71645),s=e.i(46932),a=e.i(88653),l=e.i(5766);e.i(36180);var n=e.i(98925),o=e.i(67426),d=e.i(75157),c=e.i(69638),p=e.i(73884),x=e.i(55436),u=e.i(3116),g=e.i(87130),y=e.i(10980),h=e.i(32102),m=e.i(86536),f=e.i(37727);let v=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var j=e.i(86311);function b({requests:e,enrollments:r=[]}){let[b,S]=(0,i.useState)(e),[k,z]=(0,i.useState)("requests"),[C,_]=(0,i.useState)(""),[w,I]=(0,i.useState)("all"),[W,R]=(0,i.useState)(null),[q,B]=(0,i.useState)(null),A=b.filter(e=>{let t=e.user_email.toLowerCase().includes(C.toLowerCase())||e.user_name.toLowerCase().includes(C.toLowerCase())||e.course_title.toLowerCase().includes(C.toLowerCase()),r="all"===w||e.status===w;return t&&r}),T=r.filter(e=>e.user_email?.toLowerCase().includes(C.toLowerCase())||e.user_name?.toLowerCase().includes(C.toLowerCase())||e.course_title?.toLowerCase().includes(C.toLowerCase())),L=b.filter(e=>"pending"===e.status).length,D=b.filter(e=>"approved"===e.status).length,E=b.filter(e=>"rejected"===e.status).length,O=A.reduce((e,t)=>(e[t.course_title]||(e[t.course_title]=[]),e[t.course_title].push(t),e),{}),M=T.reduce((e,t)=>{let r=t.course_title||"Unknown Course";return e[r]||(e[r]=[]),e[r].push(t),e},{});async function N(e,t){R(e);try{let r=b.find(t=>t.id===e),i=(0,n.doc)(o.db,"course_access_requests",e);await (0,n.updateDoc)(i,{status:t,updated_at:new Date().toISOString()}),"approved"===t&&r&&(await (0,n.addDoc)((0,n.collection)(o.db,"enrollments"),{user_id:r.user_id,user_email:r.user_email,user_name:r.user_name,course_id:r.course_id,course_title:r.course_title,enrolled_at:new Date().toISOString(),completed_at:null,progress_percentage:0,certificate_issued:!1}),await (0,n.addDoc)((0,n.collection)(o.db,"notifications"),{user_id:r.user_id,type:"enrollment_approved",title:"Course Access Approved! ðŸŽ‰",message:`Your access to "${r.course_title}" has been approved. Start learning now!`,course_id:r.course_id,course_title:r.course_title,is_read:!1,created_at:new Date().toISOString()})),l.default.success(`Request ${t}`),S(r=>r.map(r=>r.id===e?{...r,status:t}:r)),q?.id===e&&B(e=>e?{...e,status:t}:null)}catch(e){console.error("Error updating request:",e),l.default.error("Failed to update request")}R(null)}return(0,t.jsxs)("div",{style:{maxWidth:1100},children:[(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginBottom:28},children:[(0,t.jsx)("h1",{style:{fontFamily:"Poppins, sans-serif",fontSize:"clamp(1.5rem, 3vw, 2rem)",fontWeight:700,color:"var(--text-primary)",letterSpacing:"-0.02em",marginBottom:4},children:"Enrollments & Requests"}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:14},children:"Manage student access requests and view all active enrollments."})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:20,marginBottom:24,borderBottom:"1px solid var(--border)"},children:[(0,t.jsxs)("button",{onClick:()=>z("requests"),style:{background:"none",border:"none",padding:"0 0 12px 0",fontSize:14,fontWeight:600,color:"requests"===k?"#c9a84c":"var(--text-muted)",borderBottom:"requests"===k?"2px solid #c9a84c":"2px solid transparent",cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:["Access Requests",L>0&&(0,t.jsx)("span",{style:{background:"#f59e0b",color:"#000",fontSize:10,fontWeight:700,padding:"2px 6px",borderRadius:999},children:L})]}),(0,t.jsxs)("button",{onClick:()=>z("enrollments"),style:{background:"none",border:"none",padding:"0 0 12px 0",fontSize:14,fontWeight:600,color:"enrollments"===k?"#c9a84c":"var(--text-muted)",borderBottom:"enrollments"===k?"2px solid #c9a84c":"2px solid transparent",cursor:"pointer"},children:["All Enrollments",(0,t.jsx)("span",{style:{marginLeft:8,opacity:.6},children:r.length})]})]}),"requests"===k&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{display:"flex",gap:14,marginBottom:24,flexWrap:"wrap"},children:[{label:"Total Requests",value:b.length,icon:h.Inbox,color:"#c9a84c"},{label:"Pending",value:L,icon:u.Clock,color:"#f59e0b"},{label:"Approved",value:D,icon:c.CheckCircle,color:"#4ade80"},{label:"Rejected",value:E,icon:p.XCircle,color:"#f87171"}].map((e,r)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.07*r},className:"card",style:{padding:"14px 18px",display:"flex",alignItems:"center",gap:12,flex:"1 1 180px"},children:[(0,t.jsx)("div",{style:{width:38,height:38,borderRadius:10,background:`${e.color}14`,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(e.icon,{size:18,color:e.color})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:22,fontWeight:800,fontFamily:"Poppins",color:"var(--text-primary)",lineHeight:1},children:e.value}),(0,t.jsx)("div",{style:{fontSize:12,color:"var(--text-muted)",marginTop:2},children:e.label})]})]},e.label))}),(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},style:{display:"flex",gap:12,marginBottom:20,flexWrap:"wrap",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{position:"relative",flex:"1 1 240px",maxWidth:360},children:[(0,t.jsx)(x.Search,{size:15,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Search by name, email, or course...",value:C,onChange:e=>_(e.target.value),style:{paddingLeft:36}})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,t.jsx)(g.Filter,{size:13,color:"var(--text-muted)"}),["all","pending","approved","rejected"].map(e=>(0,t.jsxs)("button",{onClick:()=>I(e),style:{padding:"6px 12px",borderRadius:7,border:"1px solid",borderColor:w===e?"rgba(201,168,76,0.5)":"var(--border)",background:w===e?"rgba(201,168,76,0.1)":"transparent",color:w===e?"#c9a84c":"var(--text-secondary)",fontSize:12,fontWeight:w===e?600:400,cursor:"pointer",textTransform:"capitalize"},children:[e,"pending"===e&&L>0&&(0,t.jsx)("span",{style:{marginLeft:5,background:"#f59e0b",color:"#000",borderRadius:999,padding:"1px 6px",fontSize:10,fontWeight:700},children:L})]},e))]})]}),0===A.length?(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"card",style:{padding:60,textAlign:"center"},children:[(0,t.jsx)(h.Inbox,{size:48,color:"var(--text-muted)",style:{marginBottom:16,opacity:.3}}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",fontSize:15,fontWeight:500},children:"No access requests found"}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",fontSize:13,marginTop:4,opacity:.7},children:"all"!==w?`No ${w} requests. Try a different filter.`:"When students request access to your courses, they will appear here."})]}):(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:20},children:Object.entries(O).map(([e,r],i)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25+.08*i},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:10},children:[(0,t.jsx)("div",{style:{width:32,height:32,borderRadius:8,background:"rgba(201,168,76,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)(y.BookOpen,{size:15,color:"#c9a84c"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:15,fontWeight:600,color:"var(--text-primary)"},children:e}),(0,t.jsxs)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:[r.length," request",1!==r.length?"s":""," Â· ",r.filter(e=>"pending"===e.status).length," pending"]})]})]}),(0,t.jsx)("div",{className:"card",style:{overflow:"hidden"},children:(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{style:{borderBottom:"1px solid var(--border)"},children:["Student","Status","Requested On","Actions"].map(e=>(0,t.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:12,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:e},e))})}),(0,t.jsx)("tbody",{children:r.map((e,r)=>(0,t.jsxs)(s.motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.03*r},style:{borderBottom:"1px solid var(--border)",transition:"background 0.15s"},onMouseEnter:e=>e.currentTarget.style.background="var(--bg-secondary)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)("div",{style:{width:36,height:36,borderRadius:"50%",background:"linear-gradient(135deg, #c9a84c, #a07830)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#0a0a0a",flexShrink:0},children:(0,d.getInitials)(e.user_name)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:14,fontWeight:500,color:"var(--text-primary)"},children:e.user_name||"â€”"}),(0,t.jsx)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:e.user_email})]})]})}),(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("span",{style:{fontSize:12,padding:"3px 10px",borderRadius:999,fontWeight:500,background:"approved"===e.status?"rgba(74,222,128,0.1)":"pending"===e.status?"rgba(201,168,76,0.1)":"rgba(248,113,113,0.1)",color:"approved"===e.status?"#4ade80":"pending"===e.status?"#c9a84c":"#f87171",display:"flex",alignItems:"center",gap:4,width:"fit-content",textTransform:"capitalize"},children:[(0,t.jsx)("span",{style:{width:6,height:6,background:"currentColor",borderRadius:"50%",display:"inline-block"}}),e.status]})}),(0,t.jsx)("td",{style:{padding:"12px 16px",fontSize:13,color:"var(--text-muted)"},children:(0,d.formatDate)(e.created_at)}),(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,t.jsxs)("button",{onClick:()=>B(e),style:{display:"flex",alignItems:"center",gap:5,padding:"6px 10px",borderRadius:7,border:"1px solid var(--border)",background:"transparent",color:"var(--text-secondary)",fontSize:12,fontWeight:500,cursor:"pointer"},children:[(0,t.jsx)(m.Eye,{size:13}),"View"]}),"approved"!==e.status&&(0,t.jsxs)("button",{onClick:()=>N(e.id,"approved"),disabled:W===e.id,style:{display:"flex",alignItems:"center",gap:5,padding:"6px 12px",borderRadius:7,border:"1px solid rgba(74,222,128,0.3)",background:"rgba(74,222,128,0.08)",color:"#4ade80",fontSize:12,fontWeight:500,cursor:"pointer"},children:[(0,t.jsx)(c.CheckCircle,{size:13}),"Approve"]}),"rejected"!==e.status&&(0,t.jsxs)("button",{onClick:()=>N(e.id,"rejected"),disabled:W===e.id,style:{display:"flex",alignItems:"center",gap:5,padding:"6px 12px",borderRadius:7,border:"1px solid rgba(248,113,113,0.3)",background:"rgba(248,113,113,0.08)",color:"#f87171",fontSize:12,fontWeight:500,cursor:"pointer"},children:[(0,t.jsx)(p.XCircle,{size:13}),"Reject"]})]})})]},e.id))})]})})})]},e))})]}),"enrollments"===k&&(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[(0,t.jsxs)("div",{style:{position:"relative",maxWidth:360,marginBottom:10},children:[(0,t.jsx)(x.Search,{size:15,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Search enrollments...",value:C,onChange:e=>_(e.target.value),style:{paddingLeft:36}})]}),0===T.length?(0,t.jsxs)("div",{className:"card",style:{padding:60,textAlign:"center"},children:[(0,t.jsx)(y.BookOpen,{size:48,color:"var(--text-muted)",style:{marginBottom:16,opacity:.3}}),(0,t.jsx)("p",{style:{color:"var(--text-muted)"},children:"No enrollments found."})]}):Object.entries(M).map(([e,r],i)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*i},children:[(0,t.jsxs)("div",{style:{fontWeight:600,color:"var(--text-primary)",marginBottom:10},children:[e," ",(0,t.jsxs)("span",{style:{color:"var(--text-muted)",fontSize:13,fontWeight:400},children:["(",r.length,")"]})]}),(0,t.jsx)("div",{className:"card",style:{overflow:"hidden"},children:(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,t.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:12,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase"},children:"Student"}),(0,t.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:12,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase"},children:"Enrolled On"}),(0,t.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:12,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase"},children:"Progress"})]})}),(0,t.jsx)("tbody",{children:r.map((e,r)=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)("div",{style:{width:32,height:32,borderRadius:"50%",background:"#3b82f6",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700},children:(0,d.getInitials)(e.user_name)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:14,fontWeight:500,color:"var(--text-primary)"},children:e.user_name}),(0,t.jsx)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:e.user_email})]})]})}),(0,t.jsx)("td",{style:{padding:"12px 16px",color:"var(--text-muted)",fontSize:13},children:(0,d.formatDate)(e.enrolled_at)}),(0,t.jsx)("td",{style:{padding:"12px 16px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{flex:1,height:6,background:"var(--bg-secondary)",borderRadius:999,width:100},children:(0,t.jsx)("div",{style:{height:"100%",width:`${e.progress_percentage||0}%`,background:"#4ade80",borderRadius:999}})}),(0,t.jsxs)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:[e.progress_percentage||0,"%"]})]})})]},e.id+r))})]})})})]},e))]}),(0,t.jsx)(a.AnimatePresence,{children:q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>B(null),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:100,backdropFilter:"blur(4px)"}}),(0,t.jsx)("div",{style:{position:"fixed",inset:0,zIndex:101,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",padding:20},children:(0,t.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},style:{width:"min(480px, 100%)",maxHeight:"80vh",overflowY:"auto",borderRadius:16,background:"var(--bg-primary)",border:"1px solid var(--border)",boxShadow:"0 25px 50px rgba(0,0,0,0.4)",pointerEvents:"auto"},children:[(0,t.jsxs)("div",{style:{padding:"20px 24px 16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)("h3",{style:{fontSize:17,fontWeight:600,color:"var(--text-primary)"},children:"Request Details"}),(0,t.jsx)("button",{onClick:()=>B(null),style:{background:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:8,width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary)"},children:(0,t.jsx)(f.X,{size:16})})]}),(0,t.jsxs)("div",{style:{padding:"20px 24px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},children:[(0,t.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:"linear-gradient(135deg, #c9a84c, #a07830)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:700,color:"#0a0a0a",flexShrink:0},children:(0,d.getInitials)(q.user_name)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:16,fontWeight:600,color:"var(--text-primary)"},children:q.user_name}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--text-muted)"},children:q.user_email})]})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:14,padding:"16px",borderRadius:12,background:"var(--bg-secondary)",marginBottom:20},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)(y.BookOpen,{size:15,color:"#c9a84c"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Course"}),(0,t.jsx)("div",{style:{fontSize:14,fontWeight:500,color:"var(--text-primary)"},children:q.course_title})]})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)(v,{size:15,color:"#a78bfa"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Requested On"}),(0,t.jsx)("div",{style:{fontSize:14,fontWeight:500,color:"var(--text-primary)"},children:(0,d.formatDate)(q.created_at)})]})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)(u.Clock,{size:15,color:"#f59e0b"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),(0,t.jsx)("span",{style:{fontSize:12,padding:"3px 10px",borderRadius:999,fontWeight:500,background:"approved"===q.status?"rgba(74,222,128,0.1)":"pending"===q.status?"rgba(201,168,76,0.1)":"rgba(248,113,113,0.1)",color:"approved"===q.status?"#4ade80":"pending"===q.status?"#c9a84c":"#f87171",textTransform:"capitalize"},children:q.status})]})]}),q.message&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,t.jsx)(j.MessageSquare,{size:15,color:"#38bdf8",style:{marginTop:2}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:4},children:"Message from Student"}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--text-secondary)",lineHeight:1.6,padding:"10px 12px",borderRadius:8,background:"var(--bg-primary)",border:"1px solid var(--border)"},children:q.message})]})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8},children:["approved"!==q.status&&(0,t.jsxs)("button",{onClick:()=>N(q.id,"approved"),disabled:W===q.id,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"10px 16px",borderRadius:10,border:"none",background:"linear-gradient(135deg, #4ade80, #22c55e)",color:"#0a0a0a",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[(0,t.jsx)(c.CheckCircle,{size:15}),"Approve Access"]}),"rejected"!==q.status&&(0,t.jsxs)("button",{onClick:()=>N(q.id,"rejected"),disabled:W===q.id,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"10px 16px",borderRadius:10,border:"1px solid rgba(248,113,113,0.3)",background:"rgba(248,113,113,0.08)",color:"#f87171",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[(0,t.jsx)(p.XCircle,{size:15}),"Reject"]})]})]})]})})]})})]})}var S=e.i(18566),k=e.i(21841);function z(){let{user:e,profile:s,loading:a}=(0,r.useAuth)(),l=(0,S.useRouter)(),[d,c]=(0,i.useState)([]),[p,x]=(0,i.useState)([]),[u,g]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{!a&&s&&"admin"!==s.role&&l.push("/dashboard")},[a,s,l]),(0,i.useEffect)(()=>{async function t(){try{let e=(0,n.collection)(o.db,"course_access_requests"),t=(0,n.query)(e,(0,n.orderBy)("created_at","desc")),r=await (0,n.getDocs)(t),i=[];r.forEach(e=>{i.push({id:e.id,...e.data()})}),c(i);let s=(0,n.collection)(o.db,"enrollments"),a=(0,n.query)(s,(0,n.orderBy)("enrolled_at","desc")),l=await (0,n.getDocs)(a),d=[];l.forEach(e=>{d.push({id:e.id,...e.data()})}),x(d)}catch(e){console.error("Error fetching data:",e)}finally{g(!1)}}e&&s?.role==="admin"&&t()},[e,s]),e&&s&&"admin"===s.role)?u?(0,t.jsx)(k.default,{text:"Loading enrollments..."}):(0,t.jsx)(b,{requests:d,enrollments:p}):null}e.s(["default",()=>z],26688)}]);